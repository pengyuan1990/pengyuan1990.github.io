<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="a normal people"><title>golang类型一 | pengyuan1990</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.3.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.3.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">golang类型一</h1><a id="logo" href="/.">pengyuan1990</a><p class="description">keep learning</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">golang类型一</h1><div class="post-meta">Mar 19, 2017<span> | </span><span class="category"><a href="/categories/programming/">编程</a><a href="/categories/programming/学习笔记/">学习笔记</a><a href="/categories/programming/学习笔记/原创/">原创</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h1 id="golang学习笔记-一"><a href="#golang学习笔记-一" class="headerlink" title="golang学习笔记 一"></a>golang学习笔记 一</h1><p>公司项目一直在用<a href="http://docscn.studygolang.com/" target="_blank" rel="external">golang</a>作为后端开发语言，从前一直没有接触过go这门语言。从加入新公司后从头开始把基本语法熟悉之后就开始搞项目，golang这门语言相对来说比较简单，熟悉基本使用之后就可以开始项目开发了。但是搞了这么久自己觉得对golang没有一个比较深入的理解，所以准备从头开始深入的了解这么语言。其中将自己认为比较重要的地方记录下来加强记忆。</p>
<h2 id="golang类型"><a href="#golang类型" class="headerlink" title="golang类型"></a>golang类型</h2><ul>
<li><p>变量<br>golang是静态语言类型，所以变量类型确定之后就不能改变了。golang的内存分配发生在运行期。编译之后通过内存地址访问。        </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// golang 对于没有初始化的变量，运行时就会分配零值。</span></div><div class="line"><span class="keyword">var</span> x <span class="keyword">int</span> <span class="comment">// 普通定义</span></div><div class="line"><span class="keyword">var</span> x,y <span class="keyword">int</span> = <span class="number">1</span>,<span class="number">2</span> <span class="comment">// 初始化定义</span></div><div class="line"><span class="keyword">var</span> x,y = <span class="number">100</span>,<span class="string">"abc"</span></div><div class="line"><span class="keyword">var</span> ( <span class="comment">// 定义全局变量的时候使用比较多</span></div><div class="line">    x <span class="keyword">int</span> = <span class="number">100</span></div><div class="line">    y,z = <span class="number">100</span>,<span class="string">"abc"</span> </div><div class="line">)</div><div class="line"><span class="comment">// 简便定义限制：定义同时必须初始化，不能提供类型，只能在函数内部使用</span></div><div class="line">x := <span class="number">10</span></div><div class="line">x,y = <span class="number">100</span>,<span class="string">"abc"</span></div></pre></td></tr></table></figure>
<p><strong>注意</strong><br>小心局部变量覆盖全局变量的值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x =<span class="number">100</span> <span class="comment">//全局变量。没有包括在任何函数或者方法中的变量</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    fmt.Println(x) <span class="comment">// 100</span></div><div class="line">    x := <span class="string">"xyz"</span> <span class="comment">// 这个地方与全局变量的类型不一样。但是没有关系，因为两个变量处于不同作用域，在运行之后地址空间不一样，不影响变量访问。</span></div><div class="line">    fmt.Println(x) <span class="comment">// xyz</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>退化赋值</strong><br>简便赋值不一定重新定义变量，有时可能只是对部分变量进行了退化赋值操作。即变量地址不变，变量的值发生变量但是<strong><em>变量类型不能变</em></strong>。<br>退化定义的要求：<br>1 至少有一个新变量被定义<br>2 必须同一作用域(go是通过{}进行作用域区分的)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span>  <span class="title">main</span><span class="params">()</span></span>  &#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">100</span></div><div class="line">    fmt.Println(x)</div><div class="line">    x,y:= <span class="number">20</span>,<span class="number">100</span> <span class="comment">// 两次x的类型必须一样</span></div><div class="line">    fmt.Println(x,y)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>赋值操作是从右向左执行的即先计算右边的值，然后将右边的值赋给左边。所以用来交换两个变量的值非常方便。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    x,y := <span class="number">1</span>,<span class="number">2</span></div><div class="line">    x,y = y,x <span class="comment">// 2,1</span></div><div class="line">    fmt.Println(x,y)</div><div class="line">    x,y = x+<span class="number">1</span>,y+<span class="number">1</span> <span class="comment">// 3,2</span></div><div class="line">    fmt.Println(x,y)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注意</strong><br>没有使用的变量golang会提示报错。</p>
</li>
<li><p>常量<br>常量表示运行时就恒定不可变的值。常量必须在编译期就要确定特定的值，同时一旦变量的值和类型确定之后不能改变。始终记住golang是静态语言类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 注意与变量定义的区别，“:”</span></div><div class="line"><span class="keyword">const</span> x ,y = <span class="number">1</span>,<span class="number">2</span></div><div class="line"><span class="keyword">const</span> a,b = <span class="string">"adb"</span>,<span class="string">`我`</span></div><div class="line"><span class="keyword">const</span> (</div><div class="line">    a,b = <span class="number">1</span>,<span class="number">0.1</span></div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>引用类型<br>golang中的引用类型特指：slice(切片),map(字典),channel(通道)三种预定义类型。<br>相对一般类型的不同之处就是，引用类型具有比较复杂的存储结构，同时出来分配内存外还有额外的操作比如：指针长度等。<br>引用类型的初始化需要通过make函数进行。golang中也存在new函数，但是与make差别时new函数只是为<em>指定类型长度分配零值</em>状态下的内存，然后返回指针也就是说按照我们指定的<br>长度将各个元素根据类型初始为零值状态，然后返回这块地址的指针。而make函数时专门用来初始化这三个类型的方法，除了分配内存之外还要对相关属性进行初始化操作，以保证正常<br>的使用。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    s := <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">5</span>,<span class="number">10</span>) <span class="comment">// 分配长度为5的切片，同时切片的最多个数时10</span></div><div class="line">    fmt.Println(s) <span class="comment">// [0,0,0,0,0]</span></div><div class="line">    p := <span class="built_in">make</span>([]<span class="keyword">string</span>,<span class="number">5</span>,<span class="number">5</span>)</div><div class="line">    fmt.Println(p) <span class="comment">// [    ] string的空值时“”</span></div><div class="line">    m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>) <span class="comment">// 分配字典</span></div><div class="line">    m[<span class="string">"1"</span>] = <span class="string">"a"</span></div><div class="line">    fmt.Println(m) <span class="comment">// map[1:a]</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
</ul>
</div><div class="tags"><a href="/tags/golang/">golang</a></div><div class="post-nav"><a href="/2017/03/19/python/" class="pre">python</a><a href="/2017/03/12/hello-world/" class="next">Hello World</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/programming/">编程</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/programming/学习笔记/">学习笔记</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/programming/学习笔记/原创/">原创</a><span class="category-list-count">5</span></li></ul></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/python/" style="font-size: 15px;">python</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/03/27/golang-数据/">golang-数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/golang-函数/">golang-函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/golang-表达式/">golang-表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/21/golang-type2/">golang类型二</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/19/python/">python</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/19/golang/">golang类型一</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/hello-world/">Hello World</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.3.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:506756261@qq.com" target="_blank" class="fa fa-email"> </a><a href="http://weibo.com/u/3406493032/home" target="_blank" class="fa fa-weibo"></a><a href="https://github.com/pengyuan1990" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">pengyuan</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=1.3.0"></script></body></html>